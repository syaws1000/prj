<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="/com/bootstrap.min.css" >
<style>
	td{text-align:center;}
	#loadBtn{
		position:fixed; /* 화면에 고정 */
		top: 40%; /*화면의 아래위로 중간*/
		left: 50%; /*화면의 좌우로 중간*/
	}
</style>
<script src="/com/jquery-3.7.1.js"></script>
<script src="/com/bootstrap.min.js"></script>
<script src="https://unpkg.com/vue"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	
	
<script type="text/javascript">
/*
# 사원정보 관리
1. backend의 DB와 연결된 사원정보 관리 처리
	1) backend
	 	a05_ajax\a01_controller\A21_CityController.java
	 	
	 	/getCityList /insertCity  /getCity /updateCity /deleteCity					
	2) frontend
		b03_vue_axios\a03_cityManager.html
		
	3) 속성 정리
	// cityName country (검색)
	// cityId cityName country population area foundedDate	
2. 이벤트 처리
	1) 이벤트 대상 요소 객체 선정 속성
		v-on:이벤트명="함수", @이벤트명="함수" 로 처리하여 이벤트 처리를 한다.
	2) 검색의 경우, 입력 후, enter키를 입력하거나, 항목 입력 후, search 버튼을 입력시,
		search() 함수가 호출 되도록 한다.

*/
	$(document).ready(function(){
		// http://localhost:5050/cityListVue
		const app = Vue.createApp({
			name:"App",
			data(){
				return { msg:"도시 정보 관리(axios)!",
						 sch:{cityName:"",country:""},
						 cityList:[],
						 city:{cityId:0, cityName:"", country:"", population:0, area:0.0, foundedDate:new Date(),
						 isLoading:false}
				}
			},
			// 초기화면에 로딩될 때, 처리하는 함수..(vue의 life cycle 함수 )
			created(){
				this.search()
			},
			methods:{
				
				// 검색 처리
				search(){
					this.isLoading = true;
					axios.get("/getCityList", {params:this.sch}).then(response=>{
						console.log(response.data)
						
						this.cityList = response.data
						this.isLoading = false;
						
					}).catch(err=>{
						console.log(err)
					})	
					
				}
			}
		})
		
		app.mount(".container")
	});
</script>
</head>

<body>

<div class="container">
	<div class="jumbotron text-center">
  	<h2>{{msg}}</h2>

	</div>
	<form id="frm01" class="form"  method="post">
  	<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
	    <input placeholder="제목" name=""  class="form-control mr-sm-2" />
	    <input placeholder="내용" name=""  class="form-control mr-sm-2"/>
	    <button class="btn btn-info" type="submit">Search</button>
	    <button class="btn btn-success" 
	    	data-toggle="modal" data-target="#exampleModalCenter"
	        type="button">등록</button>
 	</nav>
	</form>
   <table class="table table-hover table-striped">
   	<col width="25%">
   	<col width="25%">
   	<col width="25%">
   	<col width="25%">
    <thead>
    
      <tr class="table-success text-center">
        <th>도시아이디</th>
        <th>도시명</th>
        <th>국가</th>
        <th>인구</th>
      </tr>
    </thead>	
    <tbody>
    	<tr v-for="city in cityList">
    		<td>{{city.cityId}}</td><td>{{city.cityName}}</td>
    		<td>{{city.country}}</td><td>{{city.population.toLocaleString()}}</td></tr>
    </tbody>
	</table>    
	<!-- 서버에서 데이터 가져올 때, 로딩되기 전에 화면 표시.. -->
	<button class="btn btn-primary" id="loadBtn" v-show="isLoading" disabled>
	  <span class="spinner-border spinner-border-sm"></span>
	  Loading..
	</button>    
	
	<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	  <div class="modal-dialog modal-dialog-centered" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="exampleModalLongTitle">타이틀</h5>
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </button>
	      </div>
	      <div class="modal-body">
			<form id="frm02" class="form"  method="post">
		     <div class="row">
		      <div class="col">
		        <input type="text" class="form-control" placeholder="사원명 입력" name="ename">
		      </div>
		      <div class="col">
		        <input type="text" class="form-control" placeholder="직책명 입력" name="job">
		      </div>
		     </div>
		    </form> 
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
	        <button type="button" class="btn btn-primary">Save changes</button>
	      </div>
	    </div>
	  </div>
	</div>	
	
	
</div>




</body>