## 🌟 Spring Boot 게시판: 세션 권한 처리 + 파일 다운로드

### 🤖 대상: 다양한 수준의 웹 프로그래밍 학습자

### 🎯 목표: 스스로 탐구하고 실무에 적용할 수 있는 학습 교안

---

## 1. 주의 집중 끌기 및 학습 연결성 제공 (Attention)

### 🤔 의문 제기:

* “관리자만 게시글 삭제할 수 있어야 하는데, 모두가 삭제해도 괜찮을까요?”
* “게시글 첨부파일을 누르면 파일이 열리지 않고 오류가 나요! 왜일까요?”

### 🎯 몰입 전략:

* 🔐 “탈출 게임! 로그인/권한이 없으면 아무것도 못한다!” 미션 제시
* 🧠 “파일 보물찾기! 링크를 눌렀을 때, 다른 사람이 파일을 못 보게 하려면?”

> 💬 “지금 우리가 배우는 건 **실제 서비스에서 반드시 필요한 핵심 보안 처리**랍니다!”

---

## 2. 학습 목표 (Relevance + Confidence)

### ✅ 오늘의 목표

* 세션 정보로 사용자 권한을 구분해 기능 제한 처리할 수 있다.
* 첨부파일을 서버에서 다운로드 처리하고, 보안상 안전하게 접근 제어할 수 있다.

> 📌 공유 문구:
> "**관리자만 삭제 가능! 로그인 사용자만 다운로드 가능! 실무 보안은 지금부터!**"

---

## 3. 선수 학습 상기 및 실생활 연결하기

### 🧠 복습 퀴즈

* Q. `HttpSession`은 어떤 역할을 하나요?
* Q. `@GetMapping`, `@PostMapping` 차이는?

### 💡 실생활 연결:

> “카페 Wi-Fi는 인증 후에만 사용 가능하죠? 게시판도 로그인된 사용자에게만 열어주는 것과 같아요!”

---

## 4. 주요 개념/핵심 키워드를 최고의 암기법에 의해 제시

| 키워드                  | 암기법                              |
| -------------------- | -------------------------------- |
| `HttpSession`        | “HTTP의 기억상자!” – 로그인하면 여기에 정보 저장! |
| `@SessionAttributes` | “세션과 친구 먹는 컨트롤러!”                |
| `FileDownloadView`   | “파일 배달부!” – 저장된 파일을 찾아 브라우저로 전송  |
| `권한(Role)`           | “입장권!” – 관리자/일반 사용자 구분           |
| `ModelAndView`       | “모델 + View를 한 번에 포장!”            |

---

## 5. 학습 목표별 탐구형 학습 (Exploration)

### 🧪 실험 1: 세션으로 로그인 상태 유지

* 👨‍🔧 힌트: `session.setAttribute("user", userInfo)` 사용!
* ❓ 문제: 로그인한 사용자의 이름을 게시판 우측 상단에 띄워보세요!

### 🧪 실험 2: 관리자만 글 삭제 가능

* 👮‍♂️ 힌트: if문으로 `user.getRole().equals("admin")` 조건 체크!
* ❓ 문제: 일반 사용자가 삭제 버튼을 눌렀을 때 “권한 없음” 경고창 출력 처리!

### 🧪 실험 3: 파일 다운로드 링크 처리

* 🧭 힌트: `ResponseEntity<Resource>` 사용하거나 `FileSystemResource`, `HttpServletResponse` 이용!
* ❓ 문제: 업로드된 파일을 클릭했을 때, 원래 파일명으로 저장되도록 해보세요!

---

## 6. 실습 활동 및 협력 학습 유도 (Satisfaction)

* 👥 조별 미션:

  1. A조: 로그인 + 권한 처리
  2. B조: 파일 업로드/다운로드 구현
* 🎮 게임식 평가:

  * 성공 시 점수 획득! 실패 시 힌트카드 지급!
  * “해커로부터 게시판을 지켜라!” 협업 방어 게임

---

## 7. 단계별 피드백 제공과 자기 평가 기회

* ✅ 체크리스트
  \| 항목 | 성공 여부 (✓/✗) |
  \|------|------------------|
  \| 로그인 성공 후 세션 확인 |   |
  \| 사용자별 삭제 권한 제한 처리 |   |
  \| 파일 다운로드 정상 작동 |   |

* 🔁 피드백 타임:

  * ❓ “다운로드 시 404 오류가 난다면 어떤 부분을 점검해야 할까요?”
  * ✅ 정답: 파일 경로 설정 + 경로 매핑 확인 필요

---

## 8. 수행 평가 및 피드백 제공

### 🎯 수행 과제:

> “게시판을 만들고, 사용자 로그인 상태에 따라 글 삭제 및 파일 다운로드 권한을 다르게 처리하세요!”

* 💯 평가 기준:

  * [ ] 세션 로그인 기능
  * [ ] 관리자 권한 체크
  * [ ] 안전한 파일 다운로드 처리
  * [ ] 주석과 코드 정리

---

## 9. 학습 전이 강화와 실제 문제 적용 활동

### 💼 실무 시나리오:

> “고객정보를 다루는 내부 게시판 시스템에서, 직원별 권한을 설정해야 한다.
> 관리자는 삭제 가능, 일반직원은 열람/다운로드만 가능하게 처리하라!”

* 추가 과제: "다운로드 로그를 DB에 기록해보세요!"

