# 사용자별 구매 예측 및 고객 등급 설정
1. 스프링부트 처리
	1) a30_predict(backend)
		A01_PredictControler.java
			
		
		
		A02_PredictService.java
		A03_PredictDao.java
		
		Z01_ProdictDto.java
			private String userId;
			private int buyTot;
			private int buyCnt;
			private int age;
		create table predict(
			user_id varchar2(50) primary key,
			buy_tot number,
			buy_cnt number,
			age number
		);
		create sequence predict_seq;
		insert into predict(predict_seq.nextval,1000,10,5);
		insert into predict(predict_seq.nextval,1500,12,3);
		insert into predict(predict_seq.nextval,1200,8,4);
		insert into predict(predict_seq.nextval,2000,15,2);
		insert into predict(predict_seq.nextval,1700,11,6);
		
    '고객_ID': [1, 2, 3, 4, 5],
    '총_구매금액': [1000, 1500, 1200, 2000, 1700],
    '구매횟수': [10, 12, 8, 15, 11],
    '고객_연령': [5, 3, 4, 2, 6] # 회사와 거래한 기간(년)		
		
	2) a30_predict(frontend)	
		//a01_insertBuyInfo.html   : 예측을 위한 사용자 구매 정보 등록	
		a02_predictByUser.html   : 사용자별 예측 구매 내용
			ax.set_xlabel('고객 ID')
			ax.set_ylabel('예상 구매 금액')
			ax.legend(title='예측 기간')
			예측 아이디:[    ][여러아이디입력]
			예측 기간 :[   ][개월]
			==> ajax로 flask에 요청..결과 받은 json데이터를 출력 처리
2. flask 처리
	1) a31_predict	
		a01_predictController.py : 
			요청값(검색할 id들, 예측할 월을 배열로 받기)
			json데이터로 예측되는 데이터를 아이디별/월별로 처리해준다(ajax)
			http://localhost:8888/predict		
		a02_predictService.py
			요청값으로 dao에 전달하고, 다시 dao에서 검색한 데이터를
			빅데이터 알고리즘에 의해서 처리하여, 예측치를 json데이터로 리턴 처리
		a03_predictDao.py
			요청값(id) 받아서 DB를 검색하여 결과데이터를 service단에 전송
		a04_predictDto.py
			사용할 데이터를 담는 객체..	
		    userId: str
		    age : int
		    join_date : datetime
		    buyCnt : int
		    buyTot : int
		    last_purchase_date : datetime
		    actual_future_3m_purchase : int
		    
# 프로세스 순서..
1. 스프링 부트 서버에서 해당 화면 로딩되면서 기본 데이터를 ajax로 호출 처리..
	// http://localhost:5050/predict
	@GetMapping("predict")
	public String predictChart() {
		return "a30_predict\\a01_predictByUser.html";		
		
2. view화면에서 ajax로 기본 데이터를 아이디, 개월을 flask웹 서버에 요청한다.
	url:"http://localhost:8888/predict",
	
3. flask 웹서버(파이썬)
	controller ==> service ==> dao
	dao ==> service ==> controller(json 데이터를 호출하는 곳으로 전달)
	

4. a01_predictByUser.html 
	ajax 의 success 함수 안에서 받은 json데이터 사용할 차트와 함께 처리 해준다.
	
	




	
	



	
			
			
			
			



		