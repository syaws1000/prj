# 스프링 WebSocket을 활용한 실시간 채팅 
1. 웹소켓 통신 소개
	1) WebSocket 프로토콜을 사용하여 클라이언트와 서버 간의 양방향 실시간 통신을 구현하는 방법에 대한 내용입니다.
	2) 웹소켓을 사용하면 클라이언트가 서버에 지속적으로 연결되어 메시지를 주고받을 수 있어 실시간 채팅, 알림, 게임 등에 활용됩니다.

2. 환경 설정 및 의존성 추가
	1) pom.xml 의존성 추가.
		spring-boot-starter-websocket
3. 백엔트 개발
	1) WebSocket 핸들러 클래스
		- 서버에서 클라이언트와의 WebSocket 통신을 관리하는 핵심 클래스
		  TextWebSocketHandler개체 상속기반 설정
		- 필드 : Set<WebSocketSession>을 통해서 접속한 사용자들의 세션을 저장
		- 메서드 :
			연결이 성공적으로 이루어졌을 때 설정하는 메서드 : afterConnectionEstablished()
			메시지를 전송할 때 호출되는 메서드 : handleTextMessage()
			연결이 종료되었을 때 호출되는 메서드 : afterConnectionClosed()
			에러 발생 시 호출되는 메서드 :  handleTransportError	
	2) WebSocket 설정 Config 클래스 설정
		WebSocketConfig implements WebSocketConfigurer
4. 프런트앤드 개발(jsp/javascript)
	1) 소켓통신 객체 생성
		let socket = new WebSocket("ws:localhost:5050/chat");
	2) 접속시 처리 - 위 백앤드에 afterConnectionEstablished()메서드를 호출 처리한다.
		socket.onopen=function(){}
	3) 메시지 받기 - 위 백앤드에	handleTextMessage()메서드와 연동이 된다.
		socket.onmessage=function(){}		
	4) 메시지 전송 - 위 백앤드에 handleTextMessage()메서드와 연동(안에 각 클라이언트에 메시지 전송 처리)이 된다.
		socket.send("전송할 메시지 내용")
	5) 연결 끊기(메시지 전송 중지) - 위 백앤드에 afterConnectionClosed() 연동
		socket.close()		
5. 개발 순서
	1) pom.xml을 통해 lib 설정 컨테이너에 할당
	2) WebHandler.java 클래스 설정 (실제 접속/메시지전송 처리해주는 객체)	
	3) WebSocketConfig.java 클래스 설정.. 해당 클래스를 통해서 핸들러 클래스 설정 및 client에서 호출시 주소 설정

	4) application.properties 위에서 설정되 웹소켓서버 주소를 설언(front단에서 backend단에서 호출할 수 있게 처리)
		socketServer=ws:localhost:5050/chat
	5) ChattingController.java view단 화면을 호출하는 controller	
	6) chatting.jsp  : 구체적인 화면을 통해서 메시지를 전송하고 전달받는 처리하는 view 구현
		
			
		
		
		